function searchNut() {
  var d = $("#searchForm").serialize(), b;
  $.ajax({type:"POST", url:"nutSearch.php", data:d}).done(function(d) {
    b = $("#nutSearch");
    "No Match" === d ? (TINY.box.show({html:'No match for Sir Name " ' + $("#nutSearch").val() + ' "', width:300}), $(b).val($(b).attr("placeholder")).focus()) : (d = "#nutID_" + d, $(".content").mCustomScrollbar("scrollTo", d), $(b).val($(b).attr("placeholder")));
    $("input[placeholder]").focus(function(a) {
      a = $(this);
      a.val() === a.attr("placeholder") && a.val("")
    }).blur(function(a) {
      a = $(this);
      "" === a.val() && a.val(a.attr("placeholder"))
    })
  }).fail(function(b, a, c) {
    alert(b.responseText)
  })
}
function getMessageBody(d) {
  var b = "", e, a, c, h, g, f;
  for(e = 0;e < d.elements.length;e += 1) {
    if(h = d.elements[e], h.name && (a = h.nodeName.toLowerCase(), g = h.type ? h.type.toLowerCase() : "", "input" !== a || "checkbox" !== g && "radio" !== g || h.checked)) {
      g = "";
      if("select" === a) {
        for(a = 0;a < h.options.length;a += 1) {
          c = h.options[a], c.selected && (c = (f = c.getAttributeNode("value")) && f.specified ? c.value : c.text, "" !== g && (g += "&"), g += encodeURIComponent(h.name) + "=" + encodeURIComponent(c))
        }
      }else {
        g = encodeURIComponent(h.name) + "=" + encodeURIComponent(h.value)
      }
      "" !== b && (b += "&");
      b += g
    }
  }
  return b
}
var registering = new Boolean(0);
function setExpiration(d) {
  return(new Date((new Date).getTime() + 864E5 * d)).toGMTString()
}
function createCookie(d, b, e, a, c, h) {
  document.cookie = d + "=" + escape(b) + "; ";
  e && (e = setExpiration(e), document.cookie += "expires=" + e + "; ");
  a && (document.cookie += "path=" + a + "; ");
  c && (document.cookie += "domain=" + c + "; ");
  h && (document.cookie += "secure; ")
}
function readCookie(d) {
  var b, e, a;
  d += "=";
  b = document.cookie.split(";");
  for(e = 0;e < b.length;e += 1) {
    for(a = b[e];" " === a.charAt(0);) {
      a = a.substring(1, a.length)
    }
    if(0 === a.indexOf(d)) {
      return a.substring(d.length, a.length)
    }
  }
  return null
}
function ajaxAuthenticate(d, b, e) {
  var a, c = "", h = document.getElementById("loginError"), g = document.getElementById("hintLink"), f, k, l = document.getElementById("popUpImg"), m = !1, n, c = "";
  if(!0 !== registering) {
    h.innerHTML = "";
    d = getMessageBody(d);
    c = "{";
    n = d.split("&");
    for(d = 0;d < n.length;d += 1) {
      k = n[d].split("="), "password" === decodeURIComponent(k[0]) && decodeURIComponent(k[1]) && (m = !0, c += '"' + k[0] + '" : "' + k[1] + '"'), "captcha_code" === decodeURIComponent(k[0]) && (c += ',"' + k[0] + '" : "' + k[1] + '"'), "user" === decodeURIComponent(k[0]) && (a = decodeURIComponent(k[1]))
    }
    if(!m) {
      return h.innerHTML = "Password incorrect!", l.style.display = "none", g.style.display = "block", !1
    }
    c = "value=" + (c + "}");
    registering = !1;
    f = $.ajax({type:e, url:b, data:c, dataType:"text", contentType:"application/x-www-form-urlencoded"});
    f.done(function(b) {
      if("ok" === f.responseText) {
        if("Walnut" === a) {
          createCookie("nutCookie", "loggedIn", "60000", "", "", 1), window.location.href = "Walnuts.html"
        }else {
          if("Foxy" === a) {
            createCookie("foxyCookie", "loggedIn", "60000", "", "", 1), window.location.href = "WTD.html"
          }else {
            return alert("Unknown User Error"), !1
          }
        }
      }else {
        h.innerHTML = f.responseText, l.style.display = "none", g.style.display = "block"
      }
    });
    f.fail(function(a) {
      alert("An error occurred: " + a)
    });
    registering = !0
  }
}
function ajaxWalnutFunction(d) {
  var b, e, a, c;
  e = $("input:checked").val();
  c = location.host;
  if(e) {
    if("deleteNutsDBs" === e && (b = confirm("Are you sure you REALLY want to delete walnuts database?"), !1 === b)) {
      return!1
    }
    if("addNut" === e) {
      return window.open("https://" + c + "/addNut.html", "_self"), !1
    }
    if("listNuts" === e) {
      return window.open("https://" + c + "/listNuts.html", "_self"), !1
    }
    if("addBDay" === e) {
      return window.open("https://" + c + "/addBDay.html", "_self"), !1
    }
    if("listBDays" === e) {
      return window.open("https://" + c + "/listBDays.html?user=" + d, "_self"), !1
    }
    if("restoreDB" === e) {
      return window.open("https://" + c + "/restoreDB.html", "_self"), !1
    }
  }else {
    return $("<div />").addClass("redText").text("No choice selected!").appendTo("#response").fadeOut(5E3, function() {
      $(".redText").remove()
    }), !1
  }
  a = $.ajax({type:"GET", url:"walnutAction.php", data:"value=" + e}).done(function(a) {
    if("bkUpDB" === e) {
      $("<div />").addClass("redText").html(a).appendTo("#response").on({click:function() {
        $(".redText").fadeOut("slow", function() {
          $(".redText").remove()
        })
      }}, ".downLoad")
    }
    "createNutsDBs" === e && $("<div />").addClass("redText").text(a).appendTo("#response").fadeOut(1E4, function() {
      $(".redText").remove()
    });
    "deleteNutsDBs" === e && $("<div />").addClass("redText").text(a).appendTo("#response").fadeOut(1E4, function() {
      $(".redText").remove()
    })
  }).fail(function() {
    alert("Error: " + a.responseText)
  })
}
function getPostDataJSON(d) {
  var b = "";
  $.fn.serializeObject = function() {
    var b = this.serializeArray(), a = {};
    $.each(b, function() {
      void 0 !== a[this.name] ? (a[this.name].push || (a[this.name] = [a[this.name]]), a[this.name].push(this.value || "")) : a[this.name] = this.value || ""
    });
    return a
  };
  b = $("#" + d).serializeObject();
  "addNutForm" === d && (b.Created = "", b.Updated = "");
  return{data:b}
}
function ajaxAddNuts() {
  var d;
  d = getPostDataJSON("addNutForm");
  $.ajax({type:"POST", url:"addNut.php", data:d, error:function() {
    $("#addNutResponse").text("Update failed").slideDown("slow")
  }, success:function(b) {
    $("#addNutResponse").css("visibility", "visible").text(b)
  }, complete:function() {
    setTimeout(function() {
      $("#addNutResponse").css("visibility", "hidden")
    }, 8E3)
  }})
}
function ajaxAddBDay() {
  var d;
  d = getPostDataJSON("addBDayForm");
  $.ajax({type:"POST", url:"addBDay.php", data:d, success:function(b) {
    $("#addBDayResponse").text(b)
  }, fail:function() {
    $("#addBDayResponse").text("Update failed").slideDown("slow")
  }, complete:function() {
    setTimeout(function() {
      $("#addBDayResponse")
    }, 8E3)
  }})
}
function getParameterByName(d) {
  d = d.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
  d = RegExp("[\\?&]" + d + "=([^&#]*)").exec(window.location.search);
  return null === d ? "" : decodeURIComponent(d[1].replace(/\+/g, " "))
}
function isEven(d) {
  return 0 === d % 2 ? !0 : !1
}
function getMonth(d) {
  var b = "";
  switch(d) {
    case "01":
      b = "January";
      break;
    case "02":
      b = "February";
      break;
    case "03":
      b = "March";
      break;
    case "04":
      b = "April";
      break;
    case "05":
      b = "May";
      break;
    case "06":
      b = "June";
      break;
    case "07":
      b = "July";
      break;
    case "08":
      b = "August";
      break;
    case "09":
      b = "September";
      break;
    case "10":
      b = "October";
      break;
    case "11":
      b = "November";
      break;
    case "12":
      b = "December"
  }
  return b
}
function displayBDays(d, b, e) {
  var a = 0, c = 0, c = 0, h = "", g = 0, g = c = 0, f = "", c = "", k = 0, l = g = "", g = "", m = 0, n = "", n = location.host, k = b.length;
  $("#replace").empty().append('<pre><br><center><h2>Birth Dates in Database<br><span style="display:inline-block" class="downPointer">&#10132;</span></h2><center></pre>');
  if("byDate" === e) {
    for(a = 0;a < k;a += 1) {
      h !== b[a].bDayMM && (c = getMonth(b[a].bDayMM), h = b[a].bDayMM, f += "<span class='monthName'>" + c + "</span><br />");
      c = 0;
      f += "\u00a0\u00a0\u00a0\u00a0" + b[a].bDayMM + "-";
      c += 7;
      f += b[a].bDayDD;
      c += 2;
      f += b[a].bDayYYYY ? "-" + b[a].bDayYYYY + "\u00a0\u00a0\u00a0" : "\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0";
      c += 8;
      f += '<a class="oneNut" onclick= "window.location.href=\'https://' + n + "/editBDay.html?value=" + b[a].bDayID + "&user=" + d + '\'" title = "Update this Birthday">' + b[a].LastName + "</a>";
      g = b[a].LastName.length;
      f += ",\u00a0";
      c += g + 2;
      f += b[a].FirstName + "\u00a0";
      g = b[a].FirstName.length;
      c += g + 1;
      f += b[a].MiddleInit ? b[a].MiddleInit[0] + "\u00a0" : "\u00a0\u00a0";
      c += 2;
      m = 43 - c;
      c = 0;
      for(g = "";c < m;c += 1) {
        g += "\u00a0"
      }
      f += g;
      "Foxy" === d && (f += "<a class='oneNut' href='#' onclick='confirmDel(" + b[a].bDayID + ' , "' + b[a].LastName + '", "bDays", "Foxy");\' title=\'Delete\'>&times;</a>');
      f += "<br />";
      l += f;
      $("#replace").append(l);
      l = f = ""
    }
  }else {
    for(a = 0;a < k;a += 1) {
      f += '\u00a0\u00a0\u00a0\u00a0<a class="oneNut" onclick= "window.location.href=\'https://' + n + "/editBDay.html?value=" + b[a].bDayID + "&user=" + d + "'\" title = 'Update this Birthday'>";
      g = b[a].LastName + "</a>, " + b[a].FirstName + " " + ("undefined" !== typeof b[a].MiddleInit[0] ? b[a].MiddleInit[0] : " ");
      c = g.length;
      f += g;
      m = 30 - (c - 4);
      c = 0;
      for(g = "";c < m;c += 1) {
        g += "."
      }
      f += g;
      c = getMonth(b[a].bDayMM);
      f += '<span style="color:red">' + c.substring(0, 3) + "</span> ";
      f += b[a].bDayDD + " ";
      f += "" !== b[a].bDayYYYY ? b[a].bDayYYYY : "\u00a0\u00a0\u00a0\u00a0";
      "Foxy" === d && (f += " <a class='oneNut' href='#' onclick='confirmDel(" + b[a].bDayID + ' , "' + b[a].LastName + '", "bDays", "Foxy");\' title=\'Delete\'>&times;</a>');
      f += "<br />";
      l += f;
      $("#replace").append(l);
      l = f = ""
    }
  }
  $("#replace").append("<pre><br><br></pre>")
}
var scrollBar = !1;
function ajaxListBDays(d, b) {
  var e = [];
  $.ajax({type:"GET", url:"listBDays.php?value=" + b, beforeSend:function() {
    $("#spinner").show();
    $("#listWalnuts").css("display", "none");
    $("#mainMenu").css("display", "none")
  }}).done(function(a) {
    $("#spinner").hide();
    e = JSON && JSON.parse(a) || $.parseJSON(a);
    displayBDays(d, e, b);
    scrollBar ? ($(".outer").mCustomScrollbar("update"), $(".outer").mCustomScrollbar("scrollTo", "top", {scrollInertia:200})) : ($(".outer").mCustomScrollbar({mouseWheel:!0, scrollButtons:{enable:!0}}), scrollBar = !0);
    "Foxy" === d ? ($("#mainMenu").css("display", "block"), $("#listWalnuts").css("display", "none")) : ($("#mainMenu").css("display", "none"), $("#listWalnuts").css("display", "block"));
    $("select").change(function() {
      var a = "", a = 0, a = $(".sortBy option:selected").attr("myTag"), a = "1" === a ? "byDate" : "byName";
      $("#replace").empty();
      ajaxListBDays(d, a)
    })
  }).fail(function(a) {
    alert("List Birthdays failed" + a)
  })
}
function displayTable(d, b) {
  var e, a = 0, c = "", h = "", g = "", g = location.host;
  e = b.length;
  for(a = 0;a < e;a += 2) {
    a + 1 < e ? (c = "<tr><td><a class='oneNut' id='nutID_" + b[a].walnutID + "' onclick= \"window.location.href='https://" + g + "/editNut.html?value=" + b[a].walnutID + "&user=" + d + "'\" title = 'Update this Walnut'>" + b[a].SirName + "</a>", c = "Foxy" === d ? c + ("                    <a class='oneNut' href='#' onclick='confirmDel(" + b[a].walnutID + ' , "' + b[a].SirName + '", "walnuts", "Foxy");\' title=\'Delete\'>&times;</a></td><td>') : c + "</td><td>", c += "<a class='oneNut' id='nutID_" + 
    b[a + 1].walnutID + "' onclick= \"window.location.href='https://" + g + "/editNut.html?value=" + b[a + 1].walnutID + "&user=" + d + "'\" title = 'Update this Walnut'>" + b[a + 1].SirName + "</a>", c = "Foxy" === d ? c + ("                    <a class='oneNut' href='#' onclick='confirmDel(" + b[a + 1].walnutID + ' , "' + b[a + 1].SirName + '", "walnuts", "Foxy");\' title=\'Delete\'>&times;</a></td></tr>') : c + "</td></tr>", c += "<tr><td>" + b[a].Names + "</td><td>" + b[a + 1].Names + "</td></tr>", 
    c += "<tr><td>" + b[a].FormalNames + "</td><td>" + b[a + 1].FormalNames + "</td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Children' id='Children'>Children:<div class='inlineDiv'>" + b[a].Children + "</div></td><td class='editable' walnutID='" + b[a + 1].walnutID + "'name='Children' id='Children'>Children:<div class='inlineDiv'>" + b[a + 1].Children + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr1' id='Addr1'>Address: <div class='inlineDiv'>" + 
    b[a].Addr1 + "</div></td><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr1' id='Addr1'>Address: <div class='inlineDiv'>" + b[a + 1].Addr1 + "</div></div></div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr2' id='Addr2'>         <div class='inlineDiv'>" + b[a].Addr2 + "</div></td><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr2' id='Addr2'>         <div class='inlineDiv'>" + b[a + 1].Addr2 + "</div></td></div></tr>", c += "<tr><td class='editable' walnutID='" + 
    b[a].walnutID + "'name='Addr3' id='Addr3'>         <div class='inlineDiv'>" + b[a].Addr3 + "</div></td><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr2' id='Addr3'>         <div class='inlineDiv'>" + b[a + 1].Addr3 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr4' id='Addr4'>         <div class='inlineDiv'>" + b[a].Addr4 + "</div></td><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr4' id='Addr4'>         <div class='inlineDiv'>" + 
    b[a + 1].Addr4 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Email1' id='Email1'>Email 1: <div class = 'inlineDiv mailToLink'>" + b[a].Email1 + "</div></td><td class='editable' walnutID='" + b[a + 1].walnutID + "'name='Email1' id='Email1'>Email 1: <div class = 'inlineDiv mailToLink'>" + b[a + 1].Email1 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Email2' id='Email2'>      2: <div class = 'inlineDiv mailToLink'>" + 
    b[a].Email2 + "</div></td><td class='editable' walnutID='" + b[a + 1].walnutID + "'name='Email2' id='Email2'>      2: <div class = 'inlineDiv mailToLink'>" + b[a + 1].Email2 + "</div></td></tr>", c += "<tr><td   class='editable' walnutID='" + b[a].walnutID + "'name='Phone1' id='Phone1'>Phone 1: <div class='inlineDiv'>" + b[a].Phone1 + "</div></td><td class='editable' walnutID='" + b[a + 1].walnutID + "'name='Phone1' id='Phone1'>Phone 1: <div class='inlineDiv'>" + b[a + 1].Phone1 + "</div></td></tr>", 
    c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Phone2' id='Phone2'>      2: <div class='inlineDiv'>" + b[a].Phone2 + "</div></td><td class='editable' walnutID='" + b[a + 1].walnutID + "'name='Phone2' id='Phone2'>      2: <div class='inlineDiv'>" + b[a + 1].Phone2 + "</div></td></tr>", c = Date.parse(b[a].Created) < Date.parse(b[a].Updated) ? c + ("<tr><td>Last Update: " + b[a].Updated.split(" ", 1) + "</td>") : c + ("<tr><td>Last Update: " + b[a].Created.split(" ", 1) + 
    "</td>"), c = Date.parse(b[a + 1].Created) < Date.parse(b[a + 1].Updated) ? c + ("<td>Last Update: " + b[a + 1].Updated.split(" ", 1) + "</td></tr>") : c + ("<td>Last Update: " + b[a + 1].Created.split(" ", 1) + "</td></tr>"), c += "<tr><td class='editable-area' walnutID='" + b[a].walnutID + "'name='Notes' id='Notes'>Notes: <br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>" + b[a].Notes + "</textarea></div></td><td class='editable-area' walnutID='" + 
    b[a + 1].walnutID + "'name='Notes' id='Notes'>", c += "Notes:<br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>" + b[a + 1].Notes + "</textarea></div></td></tr>", c += "<tr><td>&nbsp;&nbsp;</td><td>&nbsp;&nbsp;</td></tr>", h += c, c = "") : (c = "<tr><td><a class='oneNut' id='nutID_" + b[a].walnutID + "' onclick= \"window.location.href='https://" + g + "/editNut.html?value=" + b[a].walnutID + "&user=" + d + "'\" title = 'Update this Walnut'>" + 
    b[a].SirName + "</a>", c = "Foxy" === d ? c + ("                    <a class='oneNut' href='#' onclick='confirmDel(" + b[a].walnutID + ' , "' + b[a].SirName + '", "walnuts", "Foxy");\' title=\'Delete\'>&times;</a></td><td>') : c + "</td><tr>", c += "<tr><td>" + b[a].Names + "</td></tr>", c += "<tr><td>" + b[a].FormalNames + "</td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Children' id='Children'>Children: <div class='inlineDiv'>" + b[a].Children + "</div></td></tr>", 
    c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr1' id='Addr1'>Address: <div class='inlineDiv'>" + b[a].Addr1 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr2' id='Addr2'>         <div class='inlineDiv'>" + b[a].Addr2 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Addr3' id='Addr3'>         <div class='inlineDiv'>" + b[a].Addr3 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + 
    b[a].walnutID + "'name='Addr4' id='Addr4'>         <div class='inlineDiv'>" + b[a].Addr4 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Email1' id='Email1'>Email 1: <div class = 'inlineDiv mailToLink'>" + b[a].Email1 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Email2' id='Email2'>      2: <div class = 'inlineDiv mailToLink'>" + b[a].Email2 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + 
    b[a].walnutID + "'name='Phone1' id='Phone1'>Phone 1: <div class='inlineDiv'>" + b[a].Phone1 + "</div></td></tr>", c += "<tr><td class='editable' walnutID='" + b[a].walnutID + "'name='Phone2' id='Phone2'>      2: <div class='inlineDiv'>" + b[a].Phone2 + "</div></td></tr>", c = Date.parse(b[a].Created) < Date.parse(b[a].Updated) ? c + ("<tr><td>Last Update: " + b[a].Updated.split(" ", 1) + "</td></tr>") : c + ("<tr><td>Last Update: " + b[a].Created.split(" ", 1) + "</td></tr>"), c += "<tr><td class='editable-area' walnutID='" + 
    b[a].walnutID + "'name='Notes' id='Notes'>Notes:<br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>" + b[a].Notes + "</textarea></div></td><tr>", c += "<tr><td>&nbsp;&nbsp;</td><td>&nbsp;&nbsp;</td></tr>"), h += c
  }
  document.getElementById("walnutTable").innerHTML = "<table>" + h + "</table>"
}
function saveChanges(d, b) {
  var e, a, c, h;
  e = !1 === b ? $.trim($(d).parent().children(":first").val()) : b;
  a = $(d).closest("td").hasClass("editable") ? "editable" : "editable-area";
  c = $(d).closest('[class="' + a + '"]');
  !1 === b ? ($(c).find(".active-inline div").replaceWith('<em class="ajax">Saving...<em>'), $.post("save.php", {id:$(c).attr("walnutID"), name:$(c).attr("name"), value:e}, function(b) {
    "editable" === a ? $(c).find(".active-inline .ajax").replaceWith(e.length ? e : "                   ") : $(c).find(".active-inline").empty().append('<textarea class="preEdit" rows="3" cols="30" wrap="hard" maxlength="60" >' + e + "</textarea>");
    0 === e.length ? ($(".active-inline").addClass("emptyCell"), h = "") : h = "emptyCell";
    $(".active-inline").removeClass("active-inline over-inline " + h)
  })) : "editable-area" === a ? $(d).closest("div.active-inline").replaceWith('<div class="inlineDiv textarea" title="Quick Edit"><textarea class="preEdit" rows="3" cols="30" wrap="hard" maxlength="60" >' + e + "</textarea></div>") : $(d).closest("div.active-inline").replaceWith('<div class="inlineDiv" title="Quick Edit">' + e + "</div>");
  setClickable()
}
function editingNut() {
  var d = !1;
  return{set:function(b) {
    d = b
  }, get:function() {
    return d
  }}
}
var editFlag = editingNut();
function setClickable() {
  $(".editable div, .editable-area div.textarea, .editable-area div.textarea textarea.preEdit").each(function() {
    $(this).text().trim().length || $(this).text("                    ").addClass("emptyCell")
  });
  $(".editable div, .editable-area div.textarea").on("mouseover.colorize", function() {
    $(this).hasClass("textarea") && !$(this).hasClass("emptyCell") ? $(this).find("textarea").addClass("over-inline").attr("title", "Quick Edit") : $(this).addClass("over-inline").attr("title", "Quick Edit")
  }).on("mouseout.colorize", function() {
    $(this).hasClass("textarea") && !$(this).hasClass("emptyCell") ? $(this).find("textarea").removeClass("over-inline").removeAttr("title") : $(this).removeClass("over-inline").removeAttr("title")
  }).on("click.inlineEdit", function(d) {
    var b, e, a;
    a = $(this);
    $(a).hasClass("active-inline") || ($(a).addClass("active-inline"), !1 === editFlag.get() ? (editFlag.set(!0), $(a).off(".colorize").removeClass("over-inline").removeClass("emptyCell").removeAttr("title"), d = '<div class="ie_div_txtarea"><textarea rows="3" cols="20" class="click-inline" wrap="hard" maxlength="60">' + $(a).text() + "</textarea>", b = $(a).text(), e = $.trim($(a).text().replace(/\/p>/g, "/p>/p>\n\n")), $(a).parent().hasClass("editable") ? $(a).html('<div class="inlineEditDiv"><input type="text" class="click-inline" size="25" maxlength="50"/><input type="button" value="SAVE" class="saveButton" /><input type="button" value="CANCEL" class="cancelButton" /></div>').find("input.click-inline").val(e).focus() : 
    $(a).html(d + '<br><input type="button" value="SAVE" class="saveButton" /><input type="button" value="CANCEL" class="cancelButton" /></div>').find("textarea").focus(), $(".saveButton").click(function() {
      editFlag.set(!1);
      saveChanges(this, !1)
    }), $(".cancelButton").click(function() {
      editFlag.set(!1);
      saveChanges(this, b)
    })) : (TINY.box.show({html:"One Edit at a time!", width:200}), $(a).removeClass("active-inline")))
  })
}
function ajaxListNutsTable(d, b) {
  var e = [];
  $.ajax({type:"GET", url:"listNuts.php", beforeSend:function() {
    $("#spinner").show();
    "Walnut" === d && $("#editHint").hide()
  }}).done(function(a) {
    $("#spinner").hide();
    e = JSON && JSON.parse(a) || $.parseJSON(a);
    displayTable(d, e);
    $(".content").mCustomScrollbar({mouseWheel:!0, scrollButtons:{enable:!0}, theme:"light-thick", advanced:{autoScrollOnFocus:!1, updateOnContentResize:!0, updateOnBrowserResize:!0}});
    setClickable();
    $("div.help img").click(function() {
      TINY.box.show({url:"help.html", width:500, height:340, opacity:100, mask:!0, maskid:"nutFrame", maskopacity:100})
    });
    $(document).keypress(function(a) {
      var b = a.keyCode ? a.keyCode : a.which, d, e;
      e = a.target.tagName.toLowerCase();
      if("input" !== e && "textarea" !== e) {
        switch(b) {
          case 65:
          ;
          case 97:
            d || (d = location.host);
            window.open("https://" + d + "/addNut.html", "_self");
            break;
          case 84:
          ;
          case 116:
            $(".content").mCustomScrollbar("scrollTo", "top", {scrollInertia:200});
            break;
          case 66:
          ;
          case 98:
            $(".content").mCustomScrollbar("scrollTo", "bottom", {scrollInertia:200});
            break;
          case 9:
          ;
          case 83:
          ;
          case 115:
            a.preventDefault(), $("input#nutSearch").focus()
        }
      }
    });
    $(".content").hover(function() {
      $(document).data({"keyboard-input":"enabled"});
      $(this).addClass("keyboard-input")
    }, function() {
      $(document).data({"keyboard-input":"disabled"});
      $(this).removeClass("keyboard-input")
    });
    $(document).keydown(function(a) {
      if("enabled" === $(this).data("keyboard-input")) {
        var b = $(".keyboard-input"), d = Math.abs($(".keyboard-input .mCSB_container").position().top);
        38 === a.which ? (a.preventDefault(), 60 > d ? b.mCustomScrollbar("scrollTo", "top") : b.mCustomScrollbar("scrollTo", d - 60, {scrollInertia:400, scrollEasing:"easeOutCirc"})) : 40 === a.which && (a.preventDefault(), b.mCustomScrollbar("scrollTo", d + 60, {scrollInertia:400, scrollEasing:"easeOutCirc"}))
      }
    });
    "Foxy" === d ? $("#mainMenu").css("display", "block") : ($("#editHint").show(), $("#bDayLink").show());
    a = e.length;
    $(".numNuts").text(a);
    b ? (a = "#" + b, $(".content").mCustomScrollbar("scrollTo", a)) : $(".content").mCustomScrollbar("scrollTo", "top")
  }).fail(function() {
    alert("List Nuts failed")
  })
}
function confirmDel(d, b, e, a) {
  var c;
  b = confirm("Really delete " + b + "?");
  "walnuts" === e ? (e = "delNut.php", c = "listNuts.html?user=" + a) : (e = "delBDay.php", c = "listBDays.html?user=" + a);
  !0 === b && $.ajax({type:"GET", url:e, data:"value= " + d}).done(function() {
    window.open(c, "_self")
  }).fail(function() {
    alert("Delete failed ID: " + d)
  })
}
function getOrigNut(d) {
  $.ajax({dataType:"json", url:"getNut.php", data:"value=" + d}).done(function(b) {
    $.each(b, function(b, a) {
      $("#editNutForm [name='" + b + "']").val(a)
    })
  }).fail(function(b) {
    $("#editNutResponse").text("error: " + b).slideDown("slow")
  }).always(function() {
    setTimeout(function() {
      $("#editNutResponse").slideUp("slow")
    }, 8E3)
  })
}
function ajaxEditNut() {
  var d, b, e;
  d = getPostDataJSON("editNutForm");
  $.ajax({type:"POST", url:"editNut.php", data:d}).done(function(a) {
    b = $("#editNutForm input[name=user]").val();
    e = $("#editNutForm input[name=walnutID]").val();
    "Foxy" === b ? window.open("listNuts.html?id=nutID_" + e, "_self") : "Walnut" === b ? window.open("Walnuts.html?id=nutID_" + e, "_self") : alert("Error: Undefined requester " + b)
  }).fail(function() {
    $("#editNutResponse").text("Update failed").slideDown("slow")
  })
}
function ajaxEditBDay() {
  var d, b;
  d = getPostDataJSON("editBDayForm");
  $.ajax({type:"POST", url:"editBDay.php", data:d}).done(function(d) {
    $("#editBDayResponse").text(d);
    b = $("#editBDayForm input[name=user]").val();
    window.open("listBDays.html?user=" + b, "_self")
  }).fail(function() {
    $("#editBDayResponse").text("Update failed").slideDown("slow")
  }).always(function() {
    setTimeout(function() {
      $("#editBDayResponse").slideUp("slow")
    }, 8E3)
  })
}
function getOrigBDay(d) {
  $.ajax({dataType:"json", url:"getBDay.php", data:"value=" + d}).done(function(b) {
    $.each(b, function(b, a) {
      $("#editBDayForm [name='" + b + "']").val(a)
    })
  }).fail(function(b) {
    $("#editBDayResponse").text("error: " + b).slideDown("slow")
  }).always(function() {
    setTimeout(function() {
      $("#editBDayResponse").slideUp("slow")
    }, 8E3)
  })
}
function ajaxRestoreDBs(d) {
  $.ajax({type:"GET", url:"restoreDBs.php", data:"value=" + d}).done(function(b) {
    $(".restoreResponse").html(b).slideUp("slow");
    window.location.href = "WTD.html"
  }).fail(function(b) {
    $(".restoreResponse").html(b)
  })
}
;