function searchNut(){var b,c,a=$("#searchForm").serialize();b=$.ajax({type:"POST",url:"nutSearch.php",data:a}).done(function(a){if(c=$("#nutSearch"),"No Match"===a)TINY.box.show({html:'No match for Sir Name " '+$("#nutSearch").val()+' "',width:300}),$(c).val($(c).attr("placeholder")).focus();else{var b="#nutID_"+a;$(".content").mCustomScrollbar("scrollTo",b),$(c).val($(c).attr("placeholder"))}$("input[placeholder]").focus(function(){var b=$(this);b.val()===b.attr("placeholder")&&b.val("")}).blur(function(){var b=$(this);""===b.val()&&b.val(b.attr("placeholder"))})}).fail(function(a){alert(a.responseText)})}function getMessageBody(a){var c,d,e,f,g,h,i,j,k,b="";for(c=0;c<a.elements.length;c+=1)if(f=a.elements[c],f.name){if(h=f.nodeName.toLowerCase(),i=f.type?f.type.toLowerCase():"","input"===h&&("checkbox"===i||"radio"===i)&&!f.checked)continue;if(g="","select"===h)for(d=0;d<f.options.length;d+=1)e=f.options[d],e.selected&&(j=e.getAttributeNode("value"),k=j&&j.specified?e.value:e.text,""!==g&&(g+="&"),g+=encodeURIComponent(f.name)+"="+encodeURIComponent(k));else g=encodeURIComponent(f.name)+"="+encodeURIComponent(f.value);""!==b&&(b+="&"),b+=g}return b}function setExpiration(a){var c,b=new Date;return c=new Date(b.getTime()+1e3*60*60*24*a),c.toGMTString()}function createCookie(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+"; ",c&&(c=setExpiration(c),document.cookie+="expires="+c+"; "),d&&(document.cookie+="path="+d+"; "),e&&(document.cookie+="domain="+e+"; "),f&&(document.cookie+="secure; ")}function readCookie(a){var b,c,d,e;for(b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d+=1){for(e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null}function ajaxAuthenticate(a,b,c){var d,e,i,j,k,n,f="",g=document.getElementById("loginError"),h=document.getElementById("hintLink"),l=document.getElementById("popUpImg"),m=!1,o="";if(registering!==!0){for(g.innerHTML="",e=getMessageBody(a),f="{",n=e.split("&"),i=0;i<n.length;i+=1)k=n[i].split("="),"password"===decodeURIComponent(k[0])&&decodeURIComponent(k[1])&&(m=!0,f+='"'+k[0]+'" : "'+k[1]+'"'),"captcha_code"===decodeURIComponent(k[0])&&(f+=',"'+k[0]+'" : "'+k[1]+'"'),"user"===decodeURIComponent(k[0])&&(d=decodeURIComponent(k[1]));if(!m)return g.innerHTML="Password incorrect!",l.style.display="none",h.style.display="block",!1;f+="}",o="value="+f,registering=!1,j=$.ajax({type:c,url:b,data:o,dataType:"text",contentType:"application/x-www-form-urlencoded"}),j.done(function(){if("ok"===j.responseText)if("Walnut"===d)createCookie("nutCookie","loggedIn","60000","","",1),window.location.href="Walnuts.html";else{if("Foxy"!==d)return alert("Unknown User Error"),!1;createCookie("foxyCookie","loggedIn","60000","","",1),window.location.href="WTD.html"}else g.innerHTML=j.responseText,l.style.display="none",h.style.display="block"}),j.fail(function(a){alert("An error occurred: "+a)}),registering=!0}}function ajaxWalnutFunction(a){var b,c,d,e;return c=$("input:checked").val(),e=location.host,c?"deleteNutsDBs"===c&&(b=confirm("Are you sure you REALLY want to delete walnuts database?"),b===!1)?!1:"addNut"===c?(window.open("https://"+e+"/addNut.html","_self"),!1):"listNuts"===c?(window.open("https://"+e+"/listNuts.html","_self"),!1):"addBDay"===c?(window.open("https://"+e+"/addBDay.html","_self"),!1):"listBDays"===c?(window.open("https://"+e+"/listBDays.html?user="+a,"_self"),!1):"restoreDB"===c?(window.open("https://"+e+"/restoreDB.html","_self"),!1):(d=$.ajax({type:"GET",url:"walnutAction.php",data:"value="+c}).done(function(a){"bkUpDB"===c&&$("<div />").addClass("redText").html(a).appendTo("#response").on({click:function(){$(".redText").fadeOut("slow",function(){$(".redText").remove()})}},".downLoad"),"createNutsDBs"===c&&$("<div />").addClass("redText").text(a).appendTo("#response").fadeOut(1e4,function(){$(".redText").remove()}),"deleteNutsDBs"===c&&$("<div />").addClass("redText").text(a).appendTo("#response").fadeOut(1e4,function(){$(".redText").remove()})}).fail(function(){alert("Error: "+d.responseText)}),void 0):($("<div />").addClass("redText").text("No choice selected!").appendTo("#response").fadeOut(5e3,function(){$(".redText").remove()}),!1)}function getPostDataJSON(a){var b="";return $.fn.serializeObject=function(){var a=this.serializeArray(),b={};return $.each(a,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},b=$("#"+a).serializeObject(),"addNutForm"===a&&(b.Created="",b.Updated=""),{data:b}}function ajaxAddNuts(){var a;a=getPostDataJSON("addNutForm"),$.ajax({type:"POST",url:"addNut.php",data:a,error:function(){$("#addNutResponse").text("Update failed").slideDown("slow")},success:function(a){$("#addNutResponse").css("visibility","visible").text(a)},complete:function(){setTimeout(function(){$("#addNutResponse").css("visibility","hidden")},8e3)}})}function ajaxAddBDay(){var a;a=getPostDataJSON("addBDayForm"),$.ajax({type:"POST",url:"addBDay.php",data:a,success:function(a){$("#addBDayResponse").text(a)},fail:function(){$("#addBDayResponse").text("Update failed").slideDown("slow")},complete:function(){setTimeout(function(){$("#addBDayResponse")},8e3)}})}function getParameterByName(a){var b,c,d;return a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search),null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))}function isEven(a){var b;return b=0===a%2?!0:!1}function getMonth(a){var b="";switch(a){case"01":b="January";break;case"02":b="February";break;case"03":b="March";break;case"04":b="April";break;case"05":b="May";break;case"06":b="June";break;case"07":b="July";break;case"08":b="August";break;case"09":b="September";break;case"10":b="October";break;case"11":b="November";break;case"12":b="December"}return b}function displayBDays(a,b,c){var e=0,f=0,g=0,h="",i=0,j=0,k=0,l="",m=30,n="",o=0,p="",q="",r="",s=0,t="",u=43;if(t=location.host,o=b.length,$("#replace").empty().append('<pre><br><center><h2>Birth Dates in Database<br><span style="display:inline-block" class="downPointer">&#10132;</span></h2><center></pre>'),"byDate"===c)for(e=0;o>e;e+=1){for(h!==b[e].bDayMM&&(n=getMonth(b[e].bDayMM),h=b[e].bDayMM,l+="<span class='monthName'>"+n+"</span><br />"),f=0,l+="\xa0\xa0\xa0\xa0"+b[e].bDayMM+"-",f+=7,l+=b[e].bDayDD,f+=2,l+=b[e].bDayYYYY?"-"+b[e].bDayYYYY+"\xa0\xa0\xa0":"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",f+=8,l+='<a class="oneNut" onclick= "window.location.href=\'https://'+t+"/editBDay.html?value="+b[e].bDayID+"&user="+a+'\'" title = "Update this Birthday">'+b[e].LastName+"</a>",k=b[e].LastName.length,l+=",\xa0",f+=k+2,l+=b[e].FirstName+"\xa0",i=b[e].FirstName.length,f+=i+1,l+=b[e].MiddleInit?b[e].MiddleInit[0]+"\xa0":"\xa0\xa0",f+=2,s=u-f,g=0,r="";s>g;g+=1)r+="\xa0";l+=r,"Foxy"===a&&(l+="<a class='oneNut' href='#' onclick='confirmDel("+b[e].bDayID+' , "'+b[e].LastName+'", "bDays", "Foxy");\' title=\'Delete\'>'+"&times;</a>"),l+="<br />",q+=l,$("#replace").append(q),l="",q=""}else for(e=0;o>e;e+=1){for(l+='\xa0\xa0\xa0\xa0<a class="oneNut" onclick= "window.location.href=\'https://'+t+"/editBDay.html?value="+b[e].bDayID+"&user="+a+"'\" title = 'Update this Birthday'>",p=b[e].LastName+"</a>, "+b[e].FirstName+" "+("undefined"!=typeof b[e].MiddleInit[0]?b[e].MiddleInit[0]:" "),j=p.length,l+=p,s=m-(j-4),g=0,r="";s>g;g+=1)r+=".";l+=r,n=getMonth(b[e].bDayMM),l+='<span style="color:red">'+n.substring(0,3)+"</span>"+" ",l+=b[e].bDayDD+" ",l+=""!==b[e].bDayYYYY?b[e].bDayYYYY:"\xa0\xa0\xa0\xa0","Foxy"===a&&(l+=" <a class='oneNut' href='#' onclick='confirmDel("+b[e].bDayID+' , "'+b[e].LastName+'", "bDays", "Foxy");\' title=\'Delete\'>'+"&times;</a>"),l+="<br />",q+=l,$("#replace").append(q),l="",q=""}$("#replace").append("<pre><br><br></pre>")}function ajaxListBDays(a,b){var d,c=[];d=$.ajax({type:"GET",url:"listBDays.php?value="+b,beforeSend:function(){$("#spinner").show(),$("#listWalnuts").css("display","none"),$("#mainMenu").css("display","none")}}).done(function(d){$("#spinner").hide(),c=JSON&&JSON.parse(d)||$.parseJSON(d),displayBDays(a,c,b),scrollBar?($(".outer").mCustomScrollbar("update"),$(".outer").mCustomScrollbar("scrollTo","top",{scrollInertia:200})):($(".outer").mCustomScrollbar({mouseWheel:!0,scrollButtons:{enable:!0}}),scrollBar=!0),"Foxy"===a?($("#mainMenu").css("display","block"),$("#listWalnuts").css("display","none")):($("#mainMenu").css("display","none"),$("#listWalnuts").css("display","block")),$("select").change(function(){var b="",c=0;c=$(".sortBy option:selected").attr("myTag"),b="1"===c?"byDate":"byName",$("#replace").empty(),ajaxListBDays(a,b)})}).fail(function(a){alert("List Birthdays failed"+a)})}function displayTable(a,b){var c,d=0,e="",f="",g="";for(g=location.host,c=b.length,d=0;c>d;d+=2)c>d+1?(e="<tr><td><a class='oneNut' id='nutID_"+b[d].walnutID+"' onclick= \"window.location.href='https://"+g+"/editNut.html?value="+b[d].walnutID+"&user="+a+"'\" title = 'Update this Walnut'>"+b[d].SirName+"</a>",e+="Foxy"===a?"                    <a class='oneNut' href='#' onclick='confirmDel("+b[d].walnutID+' , "'+b[d].SirName+'", "walnuts", "Foxy");\' title=\'Delete\'>'+"&times;</a></td><td>":"</td><td>",e+="<a class='oneNut' id='nutID_"+b[d+1].walnutID+"' onclick= \"window.location.href='https://"+g+"/editNut.html?value="+b[d+1].walnutID+"&user="+a+"'\" title = 'Update this Walnut'>"+b[d+1].SirName+"</a>",e+="Foxy"===a?"                    <a class='oneNut' href='#' onclick='confirmDel("+b[d+1].walnutID+' , "'+b[d+1].SirName+'", "walnuts", "Foxy");\' title=\'Delete\'>'+"&times;</a></td></tr>":"</td></tr>",e+="<tr><td>"+b[d].Names+"</td><td>"+b[d+1].Names+"</td></tr>",e+="<tr><td>"+b[d].FormalNames+"</td><td>"+b[d+1].FormalNames+"</td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Children' id='Children'>"+"Children:<div class='inlineDiv'>"+b[d].Children+"</div></td><td class='editable' walnutID='"+b[d+1].walnutID+"'"+"name='Children' id='Children'>"+"Children:<div class='inlineDiv'>"+b[d+1].Children+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr1' id='Addr1'>"+"Address: <div class='inlineDiv'>"+b[d].Addr1+"</div></td><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr1' id='Addr1'>"+"Address: <div class='inlineDiv'>"+b[d+1].Addr1+"</div></div></div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr2' id='Addr2'>"+"         <div class='inlineDiv'>"+b[d].Addr2+"</div></td><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr2' id='Addr2'>"+"         <div class='inlineDiv'>"+b[d+1].Addr2+"</div></td></div></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr3' id='Addr3'>"+"         <div class='inlineDiv'>"+b[d].Addr3+"</div></td><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr2' id='Addr3'>"+"         <div class='inlineDiv'>"+b[d+1].Addr3+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr4' id='Addr4'>"+"         <div class='inlineDiv'>"+b[d].Addr4+"</div></td><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr4' id='Addr4'>"+"         <div class='inlineDiv'>"+b[d+1].Addr4+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Email1' id='Email1'>"+"Email 1: <div class = 'inlineDiv mailToLink'>"+b[d].Email1+"</div></td><td class='editable' walnutID='"+b[d+1].walnutID+"'"+"name='Email1' id='Email1'>"+"Email 1: <div class = 'inlineDiv mailToLink'>"+b[d+1].Email1+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Email2' id='Email2'>"+"      2: <div class = 'inlineDiv mailToLink'>"+b[d].Email2+"</div></td><td class='editable' walnutID='"+b[d+1].walnutID+"'"+"name='Email2' id='Email2'>"+"      2: <div class = 'inlineDiv mailToLink'>"+b[d+1].Email2+"</div></td></tr>",e+="<tr><td   class='editable' walnutID='"+b[d].walnutID+"'"+"name='Phone1' id='Phone1'>"+"Phone 1: <div class='inlineDiv'>"+b[d].Phone1+"</div></td><td class='editable' walnutID='"+b[d+1].walnutID+"'"+"name='Phone1' id='Phone1'>"+"Phone 1: <div class='inlineDiv'>"+b[d+1].Phone1+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Phone2' id='Phone2'>"+"      2: <div class='inlineDiv'>"+b[d].Phone2+"</div></td><td class='editable' walnutID='"+b[d+1].walnutID+"'"+"name='Phone2' id='Phone2'>"+"      2: <div class='inlineDiv'>"+b[d+1].Phone2+"</div></td></tr>",e+=Date.parse(b[d].Created)<Date.parse(b[d].Updated)?"<tr><td>Last Update: "+b[d].Updated.split(" ",1)+"</td>":"<tr><td>Last Update: "+b[d].Created.split(" ",1)+"</td>",e+=Date.parse(b[d+1].Created)<Date.parse(b[d+1].Updated)?"<td>Last Update: "+b[d+1].Updated.split(" ",1)+"</td></tr>":"<td>Last Update: "+b[d+1].Created.split(" ",1)+"</td></tr>",e+="<tr><td class='editable-area' walnutID='"+b[d].walnutID+"'"+"name='Notes' id='Notes'>"+"Notes: <br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>"+b[d].Notes+"</textarea></div></td><td class='editable-area' walnutID='"+b[d+1].walnutID+"'"+"name='Notes' id='Notes'>",e+="Notes:<br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>"+b[d+1].Notes+"</textarea></div></td></tr>",e+="<tr><td>&nbsp;&nbsp;</td><td>&nbsp;&nbsp;</td></tr>",f+=e,e=""):(e="<tr><td><a class='oneNut' id='nutID_"+b[d].walnutID+"' onclick= \"window.location.href='https://"+g+"/editNut.html?value="+b[d].walnutID+"&user="+a+"'\" title = 'Update this Walnut'>"+b[d].SirName+"</a>",e+="Foxy"===a?"                    <a class='oneNut' href='#' onclick='confirmDel("+b[d].walnutID+' , "'+b[d].SirName+'", "walnuts", "Foxy");\' title=\'Delete\'>'+"&times;</a></td><td>":"</td><tr>",e+="<tr><td>"+b[d].Names+"</td></tr>",e+="<tr><td>"+b[d].FormalNames+"</td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Children' id='Children'>"+"Children: <div class='inlineDiv'>"+b[d].Children+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr1' id='Addr1'>"+"Address: <div class='inlineDiv'>"+b[d].Addr1+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr2' id='Addr2'>"+"         <div class='inlineDiv'>"+b[d].Addr2+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr3' id='Addr3'>"+"         <div class='inlineDiv'>"+b[d].Addr3+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Addr4' id='Addr4'>"+"         <div class='inlineDiv'>"+b[d].Addr4+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Email1' id='Email1'>"+"Email 1: <div class = 'inlineDiv mailToLink'>"+b[d].Email1+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Email2' id='Email2'>"+"      2: <div class = 'inlineDiv mailToLink'>"+b[d].Email2+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Phone1' id='Phone1'>"+"Phone 1: <div class='inlineDiv'>"+b[d].Phone1+"</div></td></tr>",e+="<tr><td class='editable' walnutID='"+b[d].walnutID+"'"+"name='Phone2' id='Phone2'>"+"      2: <div class='inlineDiv'>"+b[d].Phone2+"</div></td></tr>",e+=Date.parse(b[d].Created)<Date.parse(b[d].Updated)?"<tr><td>Last Update: "+b[d].Updated.split(" ",1)+"</td></tr>":"<tr><td>Last Update: "+b[d].Created.split(" ",1)+"</td></tr>",e+="<tr><td class='editable-area' walnutID='"+b[d].walnutID+"'"+"name='Notes' id='Notes'>"+"Notes:<br><div class='inlineDiv textarea'><textarea class='preEdit' rows='3' cols='30' wrap='hard' maxlength='60'>"+b[d].Notes+"</textarea></div></td><tr>",e+="<tr><td>&nbsp;&nbsp;</td><td>&nbsp;&nbsp;</td></tr>"),f+=e,e="";document.getElementById("walnutTable").innerHTML="<table>"+f+"</table>"}function saveChanges(a,b){var c,d,e,f;c=!1===b?$.trim($(a).parent().children(":first").val()):b,d=$(a).closest("td").hasClass("editable")?"editable":"editable-area",e=$(a).closest('[class="'+d+'"]'),b===!1?($(e).find(".active-inline div").replaceWith('<em class="ajax">Saving...<em>'),$.post("save.php",{id:$(e).attr("walnutID"),name:$(e).attr("name"),value:c},function(){"editable"===d?$(e).find(".active-inline .ajax").replaceWith(c.length?c:"                   "):$(e).find(".active-inline").empty().append('<textarea class="preEdit" rows="3" cols="30" wrap="hard" maxlength="60" >'+c+"</textarea>"),0===c.length?($(".active-inline").addClass("emptyCell"),f=""):f="emptyCell",$(".active-inline").removeClass("active-inline over-inline "+f)})):"editable-area"===d?$(a).closest("div.active-inline").replaceWith('<div class="inlineDiv textarea" title="Quick Edit"><textarea class="preEdit" rows="3" cols="30" wrap="hard" maxlength="60" >'+c+"</textarea></div>"):$(a).closest("div.active-inline").replaceWith('<div class="inlineDiv" title="Quick Edit">'+c+"</div>"),setClickable()}function editingNut(){var a=!1;return{set:function(b){a=b},get:function(){return a}}}function setClickable(){var a=$(".editable div, .editable-area div.textarea, .editable-area div.textarea textarea.preEdit");a.each(function(){$(this).text().trim().length||$(this).text("                    ").addClass("emptyCell")});var b=$(".editable div, .editable-area div.textarea");b.on("mouseover.colorize",function(){$(this).hasClass("textarea")&&!$(this).hasClass("emptyCell")?$(this).find("textarea").addClass("over-inline").attr("title","Quick Edit"):$(this).addClass("over-inline").attr("title","Quick Edit")}).on("mouseout.colorize",function(){$(this).hasClass("textarea")&&!$(this).hasClass("emptyCell")?$(this).find("textarea").removeClass("over-inline").removeAttr("title"):$(this).removeClass("over-inline").removeAttr("title")}).on("click.inlineEdit",function(){var b,c,d,e,f,g;if(g=$(this),!$(g).hasClass("active-inline")){if($(g).addClass("active-inline"),editFlag.get()!==!1)return TINY.box.show({html:"One Edit at a time!",width:200}),$(g).removeClass("active-inline"),void 0;editFlag.set(!0),$(g).off(".colorize").removeClass("over-inline").removeClass("emptyCell").removeAttr("title"),b='<div class="inlineEditDiv"><input type="text" class="click-inline" size="25" maxlength="50"/>',c='<div class="ie_div_txtarea"><textarea rows="3" cols="20" class="click-inline" wrap="hard" maxlength="60">'+$(g).text()+"</textarea>",d='<input type="button" value="SAVE" class="saveButton" /><input type="button" value="CANCEL" class="cancelButton" /></div>',e=$(g).text(),f=$.trim($(g).text().replace(/\/p>/g,"/p>/p>\n\n")),$(g).parent().hasClass("editable")?$(g).html(b+d).find("input.click-inline").val(f).focus():$(g).html(c+"<br>"+d).find("textarea").focus(),$(".saveButton").click(function(){editFlag.set(!1),saveChanges(this,!1)}),$(".cancelButton").click(function(){editFlag.set(!1),saveChanges(this,e)})}})}function ajaxListNutsTable(a,b){var d,c=[];d=$.ajax({type:"GET",url:"listNuts.php",beforeSend:function(){$("#spinner").show(),"Walnut"===a&&$("#editHint").hide()}}).done(function(d){$("#spinner").hide(),c=JSON&&JSON.parse(d)||$.parseJSON(d),displayTable(a,c),$(".content").mCustomScrollbar({mouseWheel:!0,scrollButtons:{enable:!0},theme:"light-thick",advanced:{autoScrollOnFocus:!1,updateOnContentResize:!0,updateOnBrowserResize:!0}}),setClickable(),$("div.help img").click(function(){TINY.box.show({url:"help.html",width:500,height:340,opacity:100,mask:!0,maskid:"nutFrame",maskopacity:100})}),$(document).keypress(function(a){var c,d,b=a.keyCode?a.keyCode:a.which;if(d=a.target.tagName.toLowerCase(),"input"!==d&&"textarea"!==d)switch(b){case 65:case 97:c||(c=location.host),window.open("https://"+c+"/addNut.html","_self");break;case 84:case 116:$(".content").mCustomScrollbar("scrollTo","top",{scrollInertia:200});break;case 66:case 98:$(".content").mCustomScrollbar("scrollTo","bottom",{scrollInertia:200});break;case 9:case 83:case 115:a.preventDefault(),$("input#nutSearch").focus()}}),$(".content").hover(function(){$(document).data({"keyboard-input":"enabled"}),$(this).addClass("keyboard-input")},function(){$(document).data({"keyboard-input":"disabled"}),$(this).removeClass("keyboard-input")}),$(document).keydown(function(a){if("enabled"===$(this).data("keyboard-input")){var b=$(".keyboard-input"),c=Math.abs($(".keyboard-input .mCSB_container").position().top),d=60;38===a.which?(a.preventDefault(),d>c?b.mCustomScrollbar("scrollTo","top"):b.mCustomScrollbar("scrollTo",c-d,{scrollInertia:400,scrollEasing:"easeOutCirc"})):40===a.which&&(a.preventDefault(),b.mCustomScrollbar("scrollTo",c+d,{scrollInertia:400,scrollEasing:"easeOutCirc"}))}}),"Foxy"===a?$("#mainMenu").css("display","block"):($("#editHint").show(),$("#bDayLink").show());var f,e=c.length;$(".numNuts").text(e),b?(f="#"+b,$(".content").mCustomScrollbar("scrollTo",f)):$(".content").mCustomScrollbar("scrollTo","top")}).fail(function(){alert("List Nuts failed")})}function confirmDel(a,b,c,d){var e,f,g,h=confirm("Really delete "+b+"?");"walnuts"===c?(f="delNut.php",g="listNuts.html?user="+d):(f="delBDay.php",g="listBDays.html?user="+d),h===!0&&(e=$.ajax({type:"GET",url:f,data:"value= "+a}).done(function(){window.open(g,"_self")}).fail(function(){alert("Delete failed ID: "+a)}))}function getOrigNut(a){var b;b=$.ajax({dataType:"json",url:"getNut.php",data:"value="+a}).done(function(a){$.each(a,function(a,b){$("#editNutForm [name='"+a+"']").val(b)})}).fail(function(a){$("#editNutResponse").text("error: "+a).slideDown("slow")}).always(function(){setTimeout(function(){$("#editNutResponse").slideUp("slow")},8e3)})}function ajaxEditNut(){var a,b,c;a=getPostDataJSON("editNutForm"),$.ajax({type:"POST",url:"editNut.php",data:a}).done(function(){if(b=$("#editNutForm input[name=user]").val(),c=$("#editNutForm input[name=walnutID]").val(),"Foxy"===b)window.open("listNuts.html?id=nutID_"+c,"_self");else{if("Walnut"!==b)return alert("Error: Undefined requester "+b),void 0;window.open("Walnuts.html?id=nutID_"+c,"_self")}}).fail(function(){$("#editNutResponse").text("Update failed").slideDown("slow")})}function ajaxEditBDay(){var a,b;a=getPostDataJSON("editBDayForm"),$.ajax({type:"POST",url:"editBDay.php",data:a}).done(function(a){$("#editBDayResponse").text(a),b=$("#editBDayForm input[name=user]").val(),window.open("listBDays.html?user="+b,"_self")}).fail(function(){$("#editBDayResponse").text("Update failed").slideDown("slow")}).always(function(){setTimeout(function(){$("#editBDayResponse").slideUp("slow")},8e3)})}function getOrigBDay(a){var d;d=$.ajax({dataType:"json",url:"getBDay.php",data:"value="+a}).done(function(a){$.each(a,function(a,b){$("#editBDayForm [name='"+a+"']").val(b)})}).fail(function(a){$("#editBDayResponse").text("error: "+a).slideDown("slow")}).always(function(){setTimeout(function(){$("#editBDayResponse").slideUp("slow")},8e3)})}function ajaxRestoreDBs(a){var b;b=$.ajax({type:"GET",url:"restoreDBs.php",data:"value="+a}).done(function(a){$(".restoreResponse").html(a).slideUp("slow"),window.location.href="WTD.html"}).fail(function(a){$(".restoreResponse").html(a)})}var registering=new Boolean(0),scrollBar=!1,editFlag=editingNut();