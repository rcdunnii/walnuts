<?php
// get walnutID from referrer
	
	if (!($nutID = $_GET['value'])){
		print "Wrong ID # - nut cannot be deleted...";
		return;
	}
	 
	// server info
	
	$server = 'localhost';
	$user = 'rcdunnii';
	$pass = 'Tubby55';
	$db = 'walnuts';

	// connect to the database

	$mysqli = new mysqli($server, $user, $pass,$db);
	
	if ($mysqli->connect_errno) {
		echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
	}
	
	 //$mysqli->real_escape_string() function helps us prevent attacks such as SQL injection
    $query = "DELETE FROM nuts WHERE walnutID = ".$mysqli->real_escape_string($_GET['value'])."";

    //execute query

    if( $result = $mysqli->query($query)){ // DELETE query will not return a result set(unlike SELECT), but rather true...
        //if successful deletion
        //echo "User was deleted.";
    }else{
        //if there's a database problem
		printf("Errorcode: %d\n", $mysqli->errno);
        echo "Database Error: Unable to delete record.";
    }		
	$mysqli->close();
	
	header('Location: ' . $_SERVER['HTTP_REFERER']);


?>