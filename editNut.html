<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

	<title>Update Nut</title>
	
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link rel="stylesheet" href="/css/Walnuts.css"/>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>    
    <script src="js/jquery.validate.js" type="text/javascript"></script>  
	<script type="text/javascript" src="js/ajaxWalnutCoreJSON.js"></script>
    <script type="text/javascript">
    $(function() {
         // Handler for .ready() called.
         $("#editNutForm").validate({
           rules: {
                    SirName: {
                        required: true,
                        minlength: 3
                    },
                    Addr4: "required",                    
                    Email1: {
                        required:false,
                        email: true
                    },
                    Email2: {
                        required:false,
                        email: true
                    },
                    Email3: {
                        required:false,
                        email: true
                    }
           },
           messages: {               
                   SirName: {
                          required: "Must include Family Name",
                          minlength: "Name too short!" /*jQuery.format("At least{0} letters!")  */
                    },
                    Addr4: "Add country!",                    
                    Email1:{
                        email: "Email address malformed"
                       },
                    Email2:{
                        email: "Email address malformed"
                       },
                     Email3:{
                        email: "Email address malformed"
                       },              
           },
           debug: true,
           submitHandler: function(form) {
               ajaxEditNut()
           }
        });       
    });

    </script>
</head>
<body>

    <!-- this page is called by javascript function ajaxWalnutCoreJSON line # 86 as editNut.html?value=walnutID&user=requester -->

    <div class="frame">
        <div id="editNutPage">
            <h1><center>Walnuts Galore!</center></h1>
            <h3><center>Edit Nut in Our WT Database</center></h3>
            <p><center><span id="spinner">&nbsp;</span></center></p>
 <!--           <form action="" id="editNutForm" onsubmit="ajaxEditNut(); return false;">   -->
            <form action="" id="editNutForm" >            
                <fieldset>                                                                 
                        <input type="hidden" name="walnutID" id="walnutID"/>
                        <input type="hidden" name="user" id="user"/>                          
                    <ul>                     
                        <li><label for="SirName">Family Name</label><input type="text" name="SirName" id="SirName" size=30 /></li>
                        <li><label for="Names">Informal List</label><input type="text" name="Names" id="Names" size=50 /></li>
                        <li><label for="FormalNames">Formal List</label><input type="text" name="FormalNames" id="FormalNames" size=50 /></li>
                        <li><label for="Children">Children</label><input type="text" name="Children" id="Children" size=50 /></li>
                        <li><label for="Addr1">Street Address</label><input type="text" name="Addr1" id="Addr1" size=35 /></li>
                        <li><label for="Addr2">Apt/Suite</label><input type="text" name="Addr2" id="Addr2" size=10 /></li>
                        <li><label for="Addr3">City,State</label><input type="text" name="Addr3" id="Addr3" size=35 /></li>
                        <li><label for="Addr4">Country</label><input type="text" name="Addr4" id="Addr4" size=35 /></li>		
                        <li><label for="Email1">Email 1</label><input type="text" name="Email1" id="Email1" size=30 /></li>
                        <li><label for="Email2">Email 2</label><input type="text" name="Email2" id="Email2" size=30 /></li>
                        <li><label for="Email3">Email 3</label><input type="text" name="Email3" id="Email3" size=30 /></li>
                        <li><label for="Phone1">Phone 1</label><input type="text" name="Phone1" id="Phone1" size=40 /></li>
                        <li><label for="Phone2">Phone 2</label><input type="text" name="Phone2" id="Phone2" size=40 /></li>		
                        <li><label for="Notes">Notes</label><textarea name="Notes" id="Notes" cols="30" rows="3"></textarea></li> 
                    </ul>
                    <ul id="navlist">
                        <li><input type="submit" name="btn" id="submit" value="Submit"/></li>
                        <li><input type="button" name="btn" id="reset" value="Reset" onclick="document.location.reload(true);"/></li> 
                        <li><input type="button" name="btn" id="home" value="Cancel" onclick="history.go(-1); return false"/></li>
                    </ul>
                        <div><center><p><span id="editNutResponse"></span></p></center></div>
                </fieldset>
            </form>					                
        </div>
	</div>
    <script type="text/javascript">
		$(document).ready(function () {
            var targetNut = getParameterByName('value');
            var userNut = getParameterByName('user');
            document.forms[0].user.value = userNut;
            document.forms[0].walnutID.value = targetNut;
            getOrigNut(targetNut); // populate page with original nut data                        
		});
	</script>
</body>
</html>